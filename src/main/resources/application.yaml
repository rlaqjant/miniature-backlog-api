spring:
  application:
    name: miniature-backlog-api

  # 데이터베이스 설정
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/miniature_backlog}
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:validate}
    properties:
      hibernate:
        format_sql: true
    show-sql: ${JPA_SHOW_SQL:false}
    # dialect는 자동 감지 (명시적 설정 불필요)

# 서버 설정
server:
  port: ${SERVER_PORT:8080}

# 로깅 설정
logging:
  level:
    root: INFO
    com.rlaqjant.miniature_backlog_api: ${LOG_LEVEL:INFO}
    org.hibernate.SQL: ${SQL_LOG_LEVEL:WARN}

# 앱 설정
app:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}
  cookie:
    secure: ${COOKIE_SECURE:true}
    same-site: ${COOKIE_SAME_SITE:None}
    domain: ${COOKIE_DOMAIN:}

# JWT 설정
jwt:
  secret: ${JWT_SECRET}
  access-token-validity-ms: ${JWT_ACCESS_TOKEN_VALIDITY_MS:3600000}

# Cloudflare R2 설정
cloudflare:
  r2:
    endpoint-url: ${R2_ENDPOINT_URL:https://account-id.r2.cloudflarestorage.com}
    access-key-id: ${R2_ACCESS_KEY_ID:}
    secret-access-key: ${R2_SECRET_ACCESS_KEY:}
    bucket-name: ${R2_BUCKET_NAME:miniature-backlog}
    presign-expiration-minutes: ${R2_PRESIGN_EXPIRATION_MINUTES:15}
